<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>TDneté©æ™‚é–‹ç¤ºåˆ†æ - 2025-12-05 18:49:10</title>
    <style>
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'ãƒ¡ã‚¤ãƒªã‚ª', Meiryo, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            margin-bottom: 30px;
            text-align: center;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .update-info {
            color: #666;
            font-size: 14px;
        }

        /* ã‚¿ãƒ–ã‚¹ã‚¿ã‚¤ãƒ« */
        .date-tabs, .sentiment-tabs {
            background: white;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .date-tab, .sentiment-tab {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            background: #f0f0f0;
            color: #666;
            transition: all 0.3s ease;
        }

        .date-tab:hover, .sentiment-tab:hover {
            background: #e0e0e0;
            transform: translateY(-2px);
        }

        .date-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .sentiment-tab.active {
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .sentiment-tab:first-child.active {
            background: #27ae60;
        }

        .sentiment-tab:last-child.active {
            background: #e74c3c;
        }

        .date-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
            font-size: 16px;
        }

        .section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid;
        }

        .positive .section-header {
            border-color: #27ae60;
        }

        .negative .section-header {
            border-color: #e74c3c;
        }

        .section-icon {
            font-size: 2em;
            margin-right: 15px;
        }

        .section-title {
            font-size: 1.5em;
            font-weight: bold;
        }

        .positive .section-title {
            color: #27ae60;
        }

        .negative .section-title {
            color: #e74c3c;
        }

        .disclosure-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .disclosure-item:hover {
            transform: translateX(5px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .positive .disclosure-item {
            border-color: #27ae60;
            background: linear-gradient(to right, rgba(39, 174, 96, 0.05), transparent);
        }

        .negative .disclosure-item {
            border-color: #e74c3c;
            background: linear-gradient(to right, rgba(231, 76, 60, 0.05), transparent);
        }

        .disclosure-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .company-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stock-code {
            background: #2c5364;
            color: white;
            padding: 4px 12px;
            border-radius: 5px;
            font-weight: bold;
            font-size: 14px;
            text-decoration: none;
            display: inline-block;
            transition: background 0.2s;
        }

        .stock-code:hover {
            background: #1a3545;
            text-decoration: none;
        }

        .company-name {
            font-weight: bold;
            font-size: 16px;
            color: #333;
        }

        .time {
            color: #666;
            font-size: 14px;
        }

        .title {
            color: #333;
            margin-bottom: 10px;
            font-size: 14px;
            line-height: 1.6;
        }

        .reason {
            color: #666;
            font-size: 13px;
            padding: 8px;
            background: rgba(255,255,255,0.7);
            border-radius: 5px;
            margin-top: 5px;
        }

        .empty-state {
            text-align: center;
            padding: 30px;
            color: #999;
            font-size: 16px;
        }

        .error {
            background: #fee;
            color: #c33;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid #c33;
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ */
        @media (max-width: 768px) {
            .date-tab, .sentiment-tab {
                flex: 1 1 auto;
                min-width: calc(50% - 5px);
            }
        }
    
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“Š TDneté©æ™‚é–‹ç¤ºåˆ†æ</h1>
            <div class="update-info">
                <span>æœ€çµ‚æ›´æ–°: 2025-12-05 18:49:10</span>
            </div>
        </div>

        <!-- æ—¥ä»˜ã‚¿ãƒ– -->
        <div class="date-tabs">
            <button class="date-tab active" onclick="switchDate('20251205')">2025å¹´12æœˆ05æ—¥ (æœ€çµ‚å–¶æ¥­æ—¥)</button><button class="date-tab " onclick="switchDate('20251204')">2025å¹´12æœˆ04æ—¥ (å‰å–¶æ¥­æ—¥)</button><button class="date-tab " onclick="switchDate('20251203')">2025å¹´12æœˆ03æ—¥ (å‰ã€…å–¶æ¥­æ—¥)</button>
        </div>

        <!-- ã‚»ã‚°ãƒ¡ãƒ³ãƒˆåˆ‡ã‚Šæ›¿ãˆã‚¿ãƒ– -->
        <div class="sentiment-tabs">
            <button class="sentiment-tab active" onclick="switchSentiment('positive')">ğŸ“ˆ ãƒã‚¸ãƒ†ã‚£ãƒ–</button>
            <button class="sentiment-tab" onclick="switchSentiment('negative')">ğŸ“‰ ãƒã‚¬ãƒ†ã‚£ãƒ–</button>
        </div>

        <div id="content-area"></div>
    </div>

    <script>
        // åˆ†æãƒ‡ãƒ¼ã‚¿ã‚’åŸ‹ã‚è¾¼ã¿
        const analysisData = {
  "timestamp": "2025-12-05 18:49:10",
  "dates": {
    "20251205": {
      "date": "2025å¹´12æœˆ05æ—¥",
      "date_str": "20251205",
      "label": "æœ€çµ‚å–¶æ¥­æ—¥",
      "total_count": 205,
      "positive": {
        "prime": [],
        "standard": [],
        "growth": []
      },
      "negative": {
        "prime": [],
        "standard": [],
        "growth": []
      }
    },
    "20251204": {
      "date": "2025å¹´12æœˆ04æ—¥",
      "date_str": "20251204",
      "label": "å‰å–¶æ¥­æ—¥",
      "total_count": 136,
      "positive": {
        "prime": [],
        "standard": [],
        "growth": []
      },
      "negative": {
        "prime": [],
        "standard": [],
        "growth": []
      }
    },
    "20251203": {
      "date": "2025å¹´12æœˆ03æ—¥",
      "date_str": "20251203",
      "label": "å‰ã€…å–¶æ¥­æ—¥",
      "total_count": 161,
      "positive": {
        "prime": [],
        "standard": [],
        "growth": []
      },
      "negative": {
        "prime": [],
        "standard": [],
        "growth": []
      }
    }
  },
  "error": null
};
        let currentDate = '20251205';
        let currentSentiment = 'positive';

        // URLã‹ã‚‰çŠ¶æ…‹ã‚’å¾©å…ƒ
        function restoreStateFromUrl() {
            const params = new URLSearchParams(window.location.search);
            const urlDate = params.get('date');
            const urlSentiment = params.get('sentiment');
            
            if (urlDate && analysisData.dates[urlDate]) {
                currentDate = urlDate;
            }
            if (urlSentiment && (urlSentiment === 'positive' || urlSentiment === 'negative')) {
                currentSentiment = urlSentiment;
            }
        }

        // çŠ¶æ…‹ã‚’URLã«ä¿å­˜
        function saveStateToUrl() {
            const params = new URLSearchParams();
            params.set('date', currentDate);
            params.set('sentiment', currentSentiment);
            const newUrl = window.location.pathname + '?' + params.toString();
            window.history.pushState(null, '', newUrl);
        }

        // åˆæœŸè¡¨ç¤º
        window.onload = function() {
            restoreStateFromUrl();
            updateTabStyles('date', currentDate);
            updateTabStyles('sentiment', currentSentiment);
            updateDisplay();
        };

        function switchDate(dateKey) {
            currentDate = dateKey;
            updateTabStyles('date', dateKey);
            updateDisplay();
            saveStateToUrl();
        }

        function switchSentiment(sentiment) {
            currentSentiment = sentiment;
            updateTabStyles('sentiment', sentiment);
            updateDisplay();
            saveStateToUrl();
        }

        function updateTabStyles(tabType, activeValue) {
            if (tabType === 'date') {
                document.querySelectorAll('.date-tab').forEach(tab => {
                    tab.classList.remove('active');
                    if (tab.textContent.includes(analysisData.dates[activeValue].date)) {
                        tab.classList.add('active');
                    }
                });
            } else if (tabType === 'sentiment') {
                document.querySelectorAll('.sentiment-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                const targetTab = activeValue === 'positive' ? 
                    document.querySelectorAll('.sentiment-tab')[0] : 
                    document.querySelectorAll('.sentiment-tab')[1];
                if (targetTab) {
                    targetTab.classList.add('active');
                }
            }
        }

        function updateDisplay() {
            const dateData = analysisData.dates[currentDate];
            if (!dateData) return;

            const data = dateData[currentSentiment];
            const color = currentSentiment === 'positive' ? '#27ae60' : '#e74c3c';
            const icon = currentSentiment === 'positive' ? 'ğŸ“ˆ' : 'ğŸ“‰';
            const title = currentSentiment === 'positive' ? 'æ ªä¾¡ä¸Šæ˜‡ãŒæœŸå¾…ã•ã‚Œã‚‹é©æ™‚é–‹ç¤º' : 'æ ªä¾¡ä¸‹è½ã®æ‡¸å¿µãŒã‚ã‚‹é©æ™‚é–‹ç¤º';

            let html = `
                <div class="section ${currentSentiment}">
                    <div class="section-header">
                        <span class="section-icon">${icon}</span>
                        <h2 class="section-title">${title}</h2>
                    </div>
                    <div class="date-info" style="margin-bottom:20px;color:#666;">
                        ğŸ“… ${dateData.date} - å–å¾—ä»¶æ•°: ${dateData.total_count}ä»¶
                    </div>
                    <div class="market-section">
                        <h3 style="margin: 20px 0 10px 0; color: ${color};">ãƒ—ãƒ©ã‚¤ãƒ å¸‚å ´</h3>
                        <div>${renderItems(data.prime, currentSentiment)}</div>
                        
                        <h3 style="margin: 20px 0 10px 0; color: ${color};">ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰å¸‚å ´</h3>
                        <div>${renderItems(data.standard, currentSentiment)}</div>
                        
                        <h3 style="margin: 20px 0 10px 0; color: ${color};">ã‚°ãƒ­ãƒ¼ã‚¹å¸‚å ´</h3>
                        <div>${renderItems(data.growth, currentSentiment)}</div>
                    </div>
                </div>
            `;

            document.getElementById('content-area').innerHTML = html;
        }

        function renderItems(items, type) {
            if (!items || items.length === 0) {
                return '<div class="empty-state">è©²å½“ã™ã‚‹é–‹ç¤ºæƒ…å ±ãŒã‚ã‚Šã¾ã›ã‚“</div>';
            }

            const badgeColor = type === 'positive' ? '#27ae60' : '#e74c3c';
            
            return items.map(item => {
                const yahooUrl = `https://finance.yahoo.co.jp/quote/${item.code}.T`;
                
                // è¤‡æ•°ã®IRãŒã‚ã‚‹å ´åˆã¯å€‹åˆ¥ã«è¡¨ç¤º
                if (item.titles && item.titles.length > 0) {
                    return item.titles.map((title, idx) => {
                        const pdfUrl = item.pdf_urls && item.pdf_urls[idx] ? item.pdf_urls[idx] : '';
                        const reason = item.reasons && item.reasons[idx] ? item.reasons[idx] : '';
                        const aiEvaluation = item.ai_evaluations && item.ai_evaluations[idx] ? item.ai_evaluations[idx] : '';
                        
                        // å†…å®¹ç¢ºèªæ¸ˆãƒãƒƒã‚¸ï¼šAIã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã‚‹å ´åˆã®ã¿è¡¨ç¤º
                        let contentBadge = '';
                        if (aiEvaluation) {
                            // å†…å®¹ç¢ºèªæ¸ˆã®ä»¶æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
                            const confirmedCount = (item.ai_evaluations || []).filter(ai => ai).length;
                            const currentIndex = (item.ai_evaluations || []).slice(0, idx + 1).filter(ai => ai).length;
                            
                            if (confirmedCount > 1) {
                                contentBadge = `<span style="background:${badgeColor};color:white;padding:2px 6px;border-radius:3px;font-size:10px;margin-left:5px;">å†…å®¹ç¢ºèªæ¸ˆ ${currentIndex}/${confirmedCount}</span>`;
                            } else {
                                contentBadge = `<span style="background:${badgeColor};color:white;padding:2px 6px;border-radius:3px;font-size:10px;margin-left:5px;">å†…å®¹ç¢ºèªæ¸ˆ</span>`;
                            }
                        }
                        
                        let titleHtml = pdfUrl 
                            ? `<div class="title"><a href="${pdfUrl}" target="_blank" style="color:inherit;text-decoration:none;">${title}</a></div>`
                            : `<div class="title">${title}</div>`;
                        
                        let reasonHtml = reason ? `<div class="reason">${reason}</div>` : '';
                        let aiHtml = aiEvaluation ? `<div class="reason">ğŸ§ AIã‚³ãƒ¡ãƒ³ãƒˆï¼š${aiEvaluation}</div>` : '';
                        
                        return `
                        <div class="disclosure-item">
                            <div class="disclosure-header">
                                <div class="company-info">
                                    <a href="${yahooUrl}" target="_blank" class="stock-code">${item.code}</a>
                                    <span class="company-name">${item.company}</span>
                                    ${contentBadge}
                                </div>
                                <span class="time">${item.time}</span>
                            </div>
                            ${titleHtml}
                            ${reasonHtml}
                            ${aiHtml}
                        </div>
                        `;
                    }).join('');
                } else {
                    // å˜ä¸€ã®IR
                    let contentBadge = '';
                    if (item.has_content) {
                        contentBadge = `<span style="background:${badgeColor};color:white;padding:2px 6px;border-radius:3px;font-size:10px;margin-left:5px;">å†…å®¹ç¢ºèªæ¸ˆ</span>`;
                    }
                    
                    const pdfUrl = item.pdf_url || '';
                    let titleHtml = pdfUrl
                        ? `<div class="title"><a href="${pdfUrl}" target="_blank" style="color:inherit;text-decoration:none;">${item.title}</a></div>`
                        : `<div class="title">${item.title}</div>`;
                    
                    let reasonHtml = item.reason ? `<div class="reason">${item.reason}</div>` : '';
                    let aiHtml = item.ai_evaluation ? `<div class="reason">ğŸ§ AIã‚³ãƒ¡ãƒ³ãƒˆï¼š${item.ai_evaluation}</div>` : '';
                    
                    return `
                    <div class="disclosure-item">
                        <div class="disclosure-header">
                            <div class="company-info">
                                <a href="${yahooUrl}" target="_blank" class="stock-code">${item.code}</a>
                                <span class="company-name">${item.company}</span>
                                ${contentBadge}
                            </div>
                            <span class="time">${item.time}</span>
                        </div>
                        ${titleHtml}
                        ${reasonHtml}
                        ${aiHtml}
                    </div>
                    `;
                }
            }).join('');
        }
    </script>
</body>
</html>